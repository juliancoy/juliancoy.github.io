<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Accessible Pitch Tuner (A4 = 440 Hz)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <h1>Accessible Pitch Tuner</h1>
    <div class="muted">A4 reference = 440 Hz. Press <strong>Space</strong> to start/stop.</div>

    <div class="row" role="group" aria-label="Controls">
      <button id="toggle" class="primary" aria-pressed="false">Start Tuner</button>
      <label class="secondary" style="padding:.5rem 0 .5rem .75rem;border-radius:999px;">
        <input type="checkbox" id="speakToggle" checked aria-checked="true" />
        Announce notes
      </label>
    </div>

    <div class="panel" aria-live="polite" aria-atomic="true">
      <div id="noteText" class="note">—</div>
      <div class="stat"><strong>Frequency:</strong> <span id="freq">—</span> Hz</div>
      <div class="stat"><strong>Deviation:</strong> <span id="cents">—</span> cents (positive = sharp, negative = flat)</div>
      <div class="stat"><strong>Loudness:</strong> <span id="rms">—</span></div>
      <div class="stat" id="vadStatus">
        <strong>Activity:</strong> <span id="vadIndicator" style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background: #ccc; margin-left: 8px;"></span>
        <span id="vadText" style="margin-left: 8px;">Waiting for audio</span>
      </div>
    </div>

    <!-- Tuner display -->
    <div class="panel">
      <h3>Tuner</h3>
      <div id="tunerDisplay" style="position: relative; width: 100%; height: 200px; background: #f5f5f5; border-radius: 8px; overflow: hidden;">
        <div id="tunerArm" style="position: absolute; top: 50%; left: 50%; width: 4px; height: 80px; background: #333; transform-origin: 50% 100%; transform: translate(-50%, -100%) rotate(0deg); transition: transform 0.1s ease-out;"></div>
        <div style="position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: #4CAF50;"></div>
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 12px; height: 12px; background: #4CAF50; border-radius: 50%;"></div>
        <div style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); font-size: 12px; color: #666;">-50¢</div>
        <div style="position: absolute; top: 10px; left: 10%; transform: translateX(-50%); font-size: 12px; color: #666;">-25¢</div>
        <div style="position: absolute; top: 10px; left: 90%; transform: translateX(-50%); font-size: 12px; color: #666;">+25¢</div>
        <div style="position: absolute; top: 10px; right: 10px; font-size: 12px; color: #666;">+50¢</div>
      </div>
    </div>

    <!-- Screen-reader only live announcements -->
    <div id="sr-live" class="live" aria-live="assertive" aria-atomic="true"></div>

    <details class="panel">
      <summary><strong>Keyboard</strong></summary>
      <ul>
        <li><kbd>Space</kbd>: Start/Stop tuner</li>
        <li><kbd>V</kbd>: Toggle voice announcements</li>
      </ul>
    </details>
  </div>

  <script src="app.js"></script>
</body>
</html>
